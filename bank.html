<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dexile - Банк</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/bank.css">
    <link rel="icon" href="/img/favicon.svg" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&family=Unbounded:wght@200..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/bank-card.css">
    <style>
        .page-content { padding-left: 128px; }
        .hidden { display: none !important; }
        .bank-empty {
            display: flex; align-items: center; justify-content: center;
            padding: 60px 24px;
        }
        .bank-empty-card {
            background: #fff; border-radius: 24px; box-shadow: 0 12px 48px rgba(0,0,0,0.1);
            padding: 44px 48px; text-align: center; max-width: 820px; width: 100%;
        }
        .bank-empty-icon { color: var(--orange); margin-bottom: 16px; }
        .bank-empty-title {
            font-family: 'Unbounded', sans-serif; font-size: 32px; font-weight: 700; color: #19191B; margin-bottom: 10px;
        }
        .bank-empty-sub {
            font-family: 'Jost', sans-serif; font-size: 18px; color: #8F8F9E;
        }
        .aside-nav {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 96px;
            background: #fff;
            border-right: 1px solid #E5E5E5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 14px 0;
            z-index: 1500;
        }
        .aside-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 12px;
            text-decoration: none;
        }
        .aside-logo img { width: 32px; height: 32px; transition: 0.2s; }
        .aside-logo:hover img { transform: scale(1.05); }
        .aside-menu, .aside-bottom {
            display: flex; flex-direction: column; align-items: center; gap: 12px;
        }
        .aside-link {
            display: flex; align-items: center; justify-content: center;
            width: 60px; height: 60px; border-radius: 12px; text-decoration: none;
            position: relative; color: #8F8F9E; transition: 0.2s; background: transparent;
        }
        .aside-link svg { width: 28px; height: 28px; }
        .aside-link:hover { color: var(--orange); background: var(--light-bg); }
        .aside-link.active { background: var(--orange); color: #fff; }
        .aside-label {
            position: absolute; top: 50%; left: calc(100% + 10px);
            transform: translateY(-50%) translateX(8px);
            background: #fff; color: #19191B; border: 1px solid #E5E5E5;
            border-radius: 8px; padding: 7px 10px; font-family: 'Jost', sans-serif; font-size: 14px;
            opacity: 0; pointer-events: none; white-space: nowrap; transition: 0.2s; box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }
        .aside-link:hover .aside-label { opacity: 1; transform: translateY(-50%) translateX(0); }
        @media (max-width: 600px) {
            .aside-nav { width: 72px; }
            .aside-logo, .aside-link { width: 52px; height: 52px; }
            .aside-link svg { width: 24px; height: 24px; }
            .page-content { padding-left: 100px; }
            .aside-label { display: none; }
        }
    </style>
</head>
<body>

    <aside class="aside-nav">
        <a href="index.html" class="aside-logo" aria-label="Главная">
            <img src="img/favicon.svg" alt="Главная">
        </a>
        <div class="aside-menu">
            <a href="profile.html" class="aside-link" aria-label="Профиль">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm-8 9a8 8 0 0 1 16 0H4Z"/></svg>
                <span class="aside-label">Профиль</span>
            </a>
            <a href="bank.html" class="aside-link active" aria-label="Кошелёк">
                <svg viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="5" width="18" height="14" rx="2"></rect><rect x="4" y="8" width="16" height="2"></rect></svg>
                <span class="aside-label">Кошелёк</span>
            </a>
            <a href="profile.html#friends" class="aside-link" aria-label="Друзья">
                <svg viewBox="0 0 24 24" fill="currentColor"><circle cx="8" cy="9" r="3"></circle><circle cx="16" cy="11" r="3"></circle><path d="M2 20a6 6 0 0 1 12 0H2Z"></path><path d="M12 20h10a5 5 0 0 0-6-4"></path></svg>
                <span class="aside-label">Друзья</span>
            </a>
            <a href="rules.html" class="aside-link" aria-label="Суд">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11 3h2v3h6v2H5V6h6V3Z"></path><circle cx="7" cy="12" r="3"></circle><circle cx="17" cy="12" r="3"></circle><path d="M12 8v13h-2v-4h4v4h-2Z"></path></svg>
                <span class="aside-label">Суд</span>
            </a>
            <a href="rules.html" class="aside-link" aria-label="Города">
                <svg viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="10" width="5" height="10"></rect><rect x="10" y="6" width="4" height="14"></rect><rect x="16" y="12" width="5" height="8"></rect><rect x="4.5" y="12" width="2" height="2"></rect><rect x="11" y="8" width="2" height="2"></rect><rect x="18" y="14" width="2" height="2"></rect></svg>
                <span class="aside-label">Города</span>
            </a>
            <a href="index.html" class="aside-link" aria-label="Карта">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 6 8 4l8 2 5-2v16l-5 2-8-2-5 2V6Z"></path><path d="M8 4v16"></path><path d="M16 6v16"></path></svg>
                <span class="aside-label">Карта</span>
            </a>
            <a href="index.html#wiki" class="aside-link" aria-label="Википедия">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 5h10a3 3 0 0 1 3 3v11H7a3 3 0 0 0-3-3V5Z"></path><path d="M7 6h11v13h-1a3 3 0 0 0-3-3H7V6Z"></path></svg>
                <span class="aside-label">Википедия</span>
            </a>
            <a href="profile.html#stats" class="aside-link" aria-label="Статистика">
                <svg viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="12" width="3" height="8"></rect><rect x="10" y="8" width="3" height="12"></rect><rect x="16" y="4" width="3" height="16"></rect></svg>
                <span class="aside-label">Статистика</span>
            </a>
        </div>
        <div class="aside-bottom">
            <a href="#" class="aside-link" aria-label="Уведомления">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a7 7 0 0 0-7 7v3.59l-1.71 1.71A1 1 0 0 0 3 16h18a1 1 0 0 0 .71-1.71L20 12.59V9a7 7 0 0 0-7-7zm0 20a3 3 0 0 0 3-3H9a3 3 0 0 0 3 3z"/></svg>
                <span class="aside-label">Уведомления</span>
            </a>
            <a href="#" class="aside-link" aria-label="Настройки">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94a7.43 7.43 0 0 0 .05-1l2-1.55a.5.5 0 0 0 .12-.65l-1.9-3.29a.5.5 0 0 0-.6-.22l-2.35.95a7.27 7.27 0 0 0-1.73-1l-.36-2.49a.5.5 0 0 0-.5-.42h-3.8a.5.5 0 0 0-.5.42l-.36 2.49a7.27 7.27 0 0 0-1.73 1l-2.35-.95a.5.5 0 0 0-.6.22L2.69 8.2a.5.5 0 0 0 .12.65l2 1.55a7.43 7.43 0 0 0 0 2l-2 1.55a.5.5 0 0 0-.12.65l1.9 3.29a.5.5 0 0 0 .6.22l2.35-.95a7.27 7.27 0 0 0 1.73 1l.36 2.49a.5.5 0 0 0 .5.42h3.8a.5.5 0 0 0 .5-.42l.36-2.49a7.27 7.27 0 0 0 1.73-1l2.35.95a.5.5 0 0 0 .6-.22l1.9-3.29a.5.5 0 0 0-.12-.65l-2-1.55ZM12 15.5A3.5 3.5 0 1 1 15.5 12 3.5 3.5 0 0 1 12 15.5Z"/></svg>
                <span class="aside-label">Настройки</span>
            </a>
            <a href="login.html" class="aside-link" aria-label="Выйти">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 17v-3h4v-4h-4V7l-5 5 5 5zm9 3H12v-2h7V6h-7V4h7a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2z"/></svg>
                <span class="aside-label">Выйти</span>
            </a>
        </div>
    </aside>

    <main class="page-content">
        <div class="bank-empty hidden" id="bankEmpty">
            <div class="bank-empty-card">
                <div class="bank-empty-icon">
                    <svg viewBox="0 0 24 24" width="56" height="56" fill="currentColor"><rect x="3" y="5" width="18" height="14" rx="3"></rect><rect x="4" y="9" width="16" height="2"></rect><path d="M5 17h6" stroke="#FF7143" stroke-width="2" stroke-linecap="round"></path></svg>
                </div>
                <div class="bank-empty-title">У вас нет карты</div>
                <div class="bank-empty-sub">Обратитесь к банкиру в игре, чтобы открыть кошелёк</div>
            </div>
        </div>
        <div class="bank-layout">
            <!-- Левая колонка: либо "Открыть карту", либо карта + кнопки -->
            <div class="bank-left">
                <!-- Пока карта не открыта -->
                <div class="bank-open-card-block" id="bankOpenCardBlock">
                    <div class="bank-open-title">Д-Банк</div>
                    <p class="bank-open-desc">Обратитесь к банкиру в игре за открытие кошелька.</p>
                </div>

                <!-- Карта и кнопки (показываются после открытия карты) -->
                <div class="bank-card-block hidden" id="bankCardBlock">
                    <div class="bank-card">
                        <div class="bank-card-top">
                            <span class="bank-card-number" id="cardNumber">ДБ-0001</span>
                            <span class="bank-card-brand">Д-Банк</span>
                        </div>
                        <div class="bank-card-bottom">
                            <span class="bank-card-name" id="cardAccountName">Мой счёт</span>
                            <span class="bank-card-balance"><span id="balanceAmount">0</span><span class="currency">Ар</span></span>
                        </div>
                    </div>

                    <div class="bank-card-actions">
                        <button type="button" class="action-btn transfer-btn" id="transferBtn">Перевести</button>
                        <button type="button" class="action-btn edit-name-btn" id="editNameBtn">Редактировать имя счёта</button>
                        <button type="button" class="action-btn fines-btn" id="finesBtn">Штрафы</button>
                    </div>
                </div>
            </div>

            <!-- Правая колонка: история платежей -->
            <div class="bank-right">
                <div class="bank-history-header">
                    <h2 class="bank-history-title">История платежей</h2>
                    <input type="text" class="bank-history-search" id="historySearch" placeholder="Поиск по истории...">
                </div>
                <div class="history-list" id="historyList">
                    <div class="history-empty">История транзакций пуста</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Модалка: перевод -->
    <div class="bank-modal-overlay" id="transferModal">
        <div class="bank-modal">
            <h3>Перевод</h3>
            <div class="transfer-layout">
                <div class="transfer-side">
                    <div class="card-preview sender" id="senderCardPreview">
                        <div class="card-brand">Д-Банк</div>
                        <div class="card-number" id="senderCardNumber">—</div>
                        <div class="card-type">Счёт</div>
                        <div class="card-balance"><span id="senderBalance">0</span> <span class="currency">АР</span></div>
                    </div>
                    <div class="sender-select">
                        <div class="sender-info">
                            <img class="sender-avatar" src="img/profile.png" alt="avatar">
                            <div>
                                <div class="sender-nick" id="senderNick">—</div>
                                <div class="sender-sub" id="senderCardSub">—</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="transfer-arrow">→</div>
                <div class="transfer-side">
                    <div class="card-preview receiver" id="receiverCardPreview">
                        <div class="receiver-empty">Карта не выбрана</div>
                    </div>
                    <div class="receiver-select">
                        <input type="text" id="transferNick" class="action-input" placeholder="Куда (ник)">
                    </div>
                </div>
            </div>
            <div class="transfer-fields">
                <label class="field-label">Сумма</label>
                <div class="amount-row">
                    <input type="number" id="transferAmount" class="action-input" placeholder="0" min="1">
                    <span class="amount-currency">АР</span>
                </div>
                <label class="field-label">Комментарий</label>
                <textarea id="transferComment" class="action-input" placeholder="Необязательно" maxlength="350"></textarea>
                <div class="comment-hint">Символов <span id="commentCount">0</span>/350</div>
            </div>
            <div class="bank-modal-actions">
                <button type="button" class="action-btn cancel-btn" id="transferCancelBtn">Отменить</button>
                <button type="button" class="action-btn" id="transferSubmitBtn">Перевести</button>
            </div>
        </div>
    </div>

    <!-- Модалка: редактировать имя счёта -->
    <div class="bank-modal-overlay" id="editNameModal">
        <div class="bank-modal">
            <h3>Редактировать имя счёта</h3>
            <div class="action-form">
                <input type="text" id="accountNameInput" class="action-input" placeholder="Название счёта" maxlength="50">
            </div>
            <div class="bank-modal-actions">
                <button type="button" class="action-btn cancel-btn" id="editNameCancelBtn">Отмена</button>
                <button type="button" class="action-btn" id="editNameSubmitBtn">Сохранить</button>
            </div>
        </div>
    </div>

    <!-- Модалка: штрафы -->
    <div class="bank-modal-overlay" id="finesModal">
        <div class="bank-modal">
            <h3>Штрафы</h3>
            <p style="font-family: Jost, sans-serif; color: var(--gray); margin-bottom: 16px;">Список штрафов по вашему счёту. Пока штрафов нет.</p>
            <div class="bank-modal-actions">
                <button type="button" class="action-btn cancel-btn" id="finesCloseBtn">Закрыть</button>
            </div>
        </div>
    </div>

    <!-- Модалка: комментарий транзакции -->
    <div class="bank-modal-overlay" id="commentModal">
        <div class="bank-modal">
            <h3>Комментарий</h3>
            <div class="comment-content" id="commentContent"></div>
            <div class="bank-modal-actions">
                <button type="button" class="action-btn cancel-btn" id="commentCloseBtn">Закрыть</button>
            </div>
        </div>
    </div>
    <script src="js/bank.js"></script>
</body>
</html>
